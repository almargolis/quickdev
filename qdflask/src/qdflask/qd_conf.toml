[questions.qdflask.enabled]
help = "Enable Flask authentication? (qdflask)"
conf_type = "boolean"

[questions.qdflask.roles]
help = "Comma-separated user roles (must include admin)"

[questions.qdflask.login_view]
help = "Flask endpoint name for login redirect"

[questions.qdflask.passwordsdb_fpath]
help = "Path to the passwords database file"
conf_type = "fpath"

[questions.email.MAIL_SERVER]
help = "SMTP server hostname (e.g. smtp-relay.brevo.com)"

[questions.email.MAIL_PORT]
help = "SMTP port (587 for TLS, 465 for SSL)"

[questions.email.MAIL_USE_TLS]
help = "Use TLS encryption?"
conf_type = "boolean"

[questions.email.MAIL_USERNAME]
help = "SMTP username (often your email address)"

[questions.email.MAIL_DEFAULT_SENDER]
help = "Default sender address for outgoing emails"

[questions.denv.FLASK_SECRET_KEY]
help = "Secret key for Flask session signing"
conf_type = "random_fill"

[questions.denv.SMTP_PW]
help = "SMTP password or API key"

[flask.init_function]
module = "qdflask"
function = "init_auth"
priority = 10

[flask.init_function.params.roles]
source = "answer"
key = "qdflask.roles"
type = "list"
default = "['admin', 'editor']"

[flask.init_function.params.login_view]
source = "answer"
key = "qdflask.login_view"
type = "string"
default = "'auth.login'"

[flask.init_function.params.db_path]
source = "answer"
key = "qdflask.passwordsdb_fpath"
type = "string"
default = "'passwords.db'"

[[flask.post_init]]
module = "qdflask.mail_utils"
function = "init_mail"
priority = 90
