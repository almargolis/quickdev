# Site Structure

Deep dive into QuickDev site anatomy and conventions.

!!! note "Coming Soon"
    This guide is being developed. It will cover the complete QuickDev site structure in detail, migrating content from the legacy `sphinx/docs/ez_directories.rst` documentation.

## Overview

A QuickDev site is a standardized directory structure for deploying Python web applications. This guide explains every component and the rationale behind the design.

## Quick Reference

```
/var/www/mysite/          # Site root
├── conf/                  # Configuration
│   ├── .env              # Secrets (never commit)
│   ├── site.yaml         # Configuration (commit)
│   ├── site.conf         # Legacy INI format
│   └── db/               # SQLite databases
├── mysite.venv/          # Python virtual environment
├── venv@ -> mysite.venv  # Convenience symlink
├── static/               # Static assets
├── templates/            # Jinja templates
├── logs/                 # Application logs
└── app.wsgi              # WSGI entry point
```

## Configuration Directory (conf/)

**Purpose:** Central location for all configuration files

**Contents:**

- `site.yaml` - Declarative configuration (version controlled)
- `.env` - Secrets and credentials (NEVER commit)
- `site.conf` - Legacy INI format (being phased out)
- `db/` - SQLite databases for development

**Philosophy:** Separate secrets (.env) from configuration (site.yaml). See [12-Factor Config](../overview/philosophy.md#12-factor-alignment).

## Virtual Environment

**Naming:** `{acronym}.venv/` (e.g., `mysite.venv/`)

**Symlink:** `venv` points to `mysite.venv` for convenience

**Purpose:** Isolated Python dependencies per site

## Static and Templates

**Structure:**

- `static/` - CSS, JavaScript, images (served directly by Apache)
- `templates/` - Jinja2 templates

**Often symlinked** from source code repository for easy updates.

## Database Location

**Development:** SQLite in `conf/db/`

**Production:** PostgreSQL or MySQL (external), configured via `DATABASE_URL` in `.env`

## WSGI Entry Point

**File:** `app.wsgi`

**Generated by:** `qdapache`

**Purpose:** Apache mod_wsgi loads your Flask application

## Site Types

### Development Site

- Location: `~/projects/mysite/`
- Contains: Full source code, tests, docs
- Database: SQLite test data

### Production Site

- Location: `/var/www/mysite/`
- Contains: Deployment structure, symlinks to code
- Database: PostgreSQL production data

### PIP Site

- Purpose: Developing PyPI packages
- Contains: Package structure, setup.py, build tools

## Best Practices

1. **Use site.yaml** for configuration (not environment variables)
2. **Use .env** for secrets (not site.yaml)
3. **Keep logs/ outside version control** (add to .gitignore)
4. **Backup conf/db/** regularly (contains your data)
5. **Symlink static/templates** from source (easier updates)

## Next Steps

- **[Site Setup](../howto/site-setup.md)** - Create a site with qdstart
- **[Configuration Files](../howto/configuration.md)** - site.yaml reference
- **[Secrets Management](../howto/secrets.md)** - Using .env files

## Reference

- **[Site Configuration Reference](../reference/site-config.md)**
- **[qdstart Reference](../reference/qdstart.md)**
